<p-toast></p-toast>

<p-table #dtProduct class="crud-table" [value]="products" [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
	[rowsPerPageOptions]="[10,25,50]" [filterDelay]="0" selectionMode="single" dataKey="id"
	[globalFilterFields]="['name','quantity','category','description']" [resizableColumns]="true" [autoLayout]="true"
	(onRowSelect)="onRowSelect()" [(selection)]="selectedProduct" styleClass="p-datatable-responsive-demo">
	<ng-template pTemplate="caption">
		<div class="table-header">
			<h5>
				Produtos
				<span class="p-input-icon-left">
					<i class="pi pi-search"></i>
					<input pInputText class="browser-default" type="text"
						(input)="dtProduct.filterGlobal($event.target.value, 'contains')" placeholder="Pesquisar" />
				</span>
			</h5>
		</div>
	</ng-template>
	<ng-template pTemplate="header">
		<tr>
			<th style="width: 4rem"></th>
			<th pSortableColumn="name">Nome<p-sortIcon field="name"></p-sortIcon>
			</th>
			<th pSortableColumn="quantity">Quantidade<p-sortIcon field="quantity"></p-sortIcon>
			</th>
			<th pSortableColumn="category">Categoria<p-sortIcon field="category"></p-sortIcon>
			</th>
			<th pSortableColumn="description">Descrição<p-sortIcon field="description"></p-sortIcon>
			</th>
		</tr>
	</ng-template>
	<ng-template pTemplate="body" let-product>
		<tr [pSelectableRow]="product">
			<td style="text-align:center; width: 4rem;">
				<button pButton type="button" icon="pi pi-trash" (click)="onClickBtnDelete(product)"
					class="p-button-rounded p-button-text"></button>
			</td>
			<td>{{product.name}}</td>
			<td>{{product.quantity}}</td>
			<td>{{product.category}}</td>
			<td>{{product.description}}</td>
		</tr>
	</ng-template>
</p-table>

<div class="fixed-action-btn">
	<a class="btn-floating btn-large pink" (click)="onClickBtnCreate()">
		<i class="material-icons">add</i>
	</a>
</div>


<!-- Dialog (modal) -->
<p-dialog [(visible)]="showProductDialog" [style]="{width: '450px'}" header="Detalhes do Produto" [modal]="true"
	styleClass="p-fluid">
	<ng-template pTemplate="content">
		<div class="p-field">
			<label for="name">Nome</label>
			<input type="text" class="browser-default" pInputText id="name" [(ngModel)]="handleProduct.name" required
				autofocus />
			<small class="p-invalid" *ngIf="formSubmitted && !handleProduct.name">Nome é requerido.</small>
		</div>

		<div class="p-field">
			<label for="description">Descrição</label>
			<textarea id="description" class="browser-default" pInputTextarea [(ngModel)]="handleProduct.description"
				[rows]="5" [cols]="20" autoResize="autoResize" required></textarea>
		</div>

		<div class="p-formgrid p-grid">
			<div class="p-field p-col">
				<label for="quantity">Quantidade</label>
				<p-inputNumber class="browser-default" [(ngModel)]="handleProduct.quantity" [min]="0" mode="decimal" inputId="quantity"
					[useGrouping]="false" (onBlur)="normalizeNumberFields()">
				</p-inputNumber>
			</div>
		</div>

		<div class="p-field">
			<label class="p-mb-3">Categoria</label>
			<div class="p-formgrid p-grid">
				<div class="p-field-radiobutton p-col-6">
					<p-radioButton id="category1" name="category" value="Rosto" [(ngModel)]="handleProduct.category">
					</p-radioButton>
					<label for="category1">Rosto</label>
				</div>
				<div class="p-field-radiobutton p-col-6">
					<p-radioButton id="category2" name="category" value="Pele" [(ngModel)]="handleProduct.category">
					</p-radioButton>
					<label for="category2">Pele</label>
				</div>
				<div class="p-field-radiobutton p-col-6">
					<p-radioButton id="category3" name="category" value="Cabelo" [(ngModel)]="handleProduct.category">
					</p-radioButton>
					<label for="category3">Cabelo</label>
				</div>
				<div class="p-field-radiobutton p-col-6">
					<p-radioButton id="category4" name="category" value="Unhas" [(ngModel)]="handleProduct.category">
					</p-radioButton>
					<label for="category4">Unhas</label>
				</div>
			</div>
		</div>
	</ng-template>

	<ng-template pTemplate="footer">
		<button pButton pRipple label="Cancelar" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
		<button pButton pRipple label="Salvar" icon="pi pi-check" class="p-button-text" (click)="saveProduct()"></button>
	</ng-template>
</p-dialog>

<p-confirmDialog [style]="{width: '450px'}"></p-confirmDialog>